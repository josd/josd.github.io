<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cauchy–Schwarz Inequality</title>
  <style>
    :root{ --bg:#f7f9fc; --card:#ffffff; --text:#0f172a; --muted:#475569; --border:#e2e8f0; }
    html, body { background: var(--bg); color: var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    .container{ max-width: 960px; margin: 24px auto; padding: 0 16px; }
    .card{ background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 16px; box-shadow: 0 6px 20px rgba(2,6,23,0.05); }
    .stack{ display: flex; flex-direction: column; gap: 16px; }
    .row{ display:flex; align-items:center; gap:12px; }
    .kpi{ display:flex; gap:16px; flex-wrap:wrap; }
    .kpi .card{ padding:12px 14px; }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace; word-break: break-word; overflow-wrap: anywhere; }
    .badge{ padding:2px 8px; border:1px solid #cbd5e1; border-radius:999px; font-weight:700; font-size:12px; background:#f1f5f9; color:#0f172a; }
    .ok{ background:#dcfce7; border:1px solid #86efac; }
    .fail{ background:#fee2e2; border:1px solid #fecaca; }
    .small{ font-size:12px; color:#475569; }
    input.long{ width:100%; padding:8px 10px; border:1px solid var(--border); border-radius:10px; background:#fbfdff; }
    input.short{ width:120px; padding:6px 8px; border:1px solid var(--border); border-radius:10px; background:#fbfdff; }
    .inline{ display:flex; gap:10px; flex-wrap:wrap; }
  </style>
</head>
<body>
  <div class="container stack">
    <header class="card stack">
      <h1 style="margin:0">Cauchy–Schwarz inequality</h1>
      <span class="badge">Problem: |⟨x,y⟩| ≤ ‖x‖·‖y‖ in ℝⁿ</span>
      <p class="small">Provide two vectors. We compute ⟨x,y⟩, norms, explain why the inequality holds, and run checks.</p>
      <div class="row"><label class="mono" for="xInput" style="min-width:140px">x</label><input class="long" id="xInput" type="text" value="1, 2, 3" /></div>
      <div class="row"><label class="mono" for="yInput" style="min-width:140px">y</label><input class="long" id="yInput" type="text" value="3, -1, 4" /></div>
      <div class="inline">
        <div class="row"><label class="mono" for="epsInput">ε</label><input class="short" id="epsInput" type="number" step="any" value="1e-12" /></div>
        <div class="row"><button id="solve">Evaluate</button><button id="clear">Clear</button></div>
      </div>
    </header>

    <!-- 1) ANSWER -->
    <section class="card stack" id="answer-card">
      <h2 style="margin:0">Answer</h2>
      <div class="kpi">
        <div class="card"><div class="k">⟨x,y⟩</div><div id="ip" class="mono">—</div></div>
        <div class="card"><div class="k">‖x‖</div><div id="nx" class="mono">—</div></div>
        <div class="card"><div class="k">‖y‖</div><div id="ny" class="mono">—</div></div>
        <div class="card"><div class="k">‖x‖·‖y‖</div><div id="bound" class="mono">—</div></div>
        <div class="card"><div class="k">Slack (bound − |⟨x,y⟩|)</div><div id="slack" class="mono">—</div></div>
        <div class="card"><div class="k">Verdict</div><div id="verdict" class="mono">—</div></div>
      </div>
    </section>

    <!-- 2) REASON WHY -->
    <section class="card stack" id="reason-card">
      <h2 style="margin:0">Reason Why</h2>
      <div class="small mono">
        For any real <em>t</em>, ‖x − t y‖² ≥ 0 expands to ‖x‖² − 2t⟨x,y⟩ + t²‖y‖² ≥ 0. The discriminant is ≤ 0, hence
        (2⟨x,y⟩)² ≤ 4‖x‖²‖y‖², i.e. |⟨x,y⟩| ≤ ‖x‖‖y‖. Equality holds iff x and y are linearly dependent (x = λy).
      </div>
    </section>

    <!-- 3) CHECK (HARNESS) -->
    <section class="card stack" id="check-card">
      <h2 style="margin:0">Check (harness)</h2>
      <div id="checks" class="stack"></div>
    </section>
  </div>

<script>
// ES5-only, no modern APIs
(function(){
  function $(id){ return document.getElementById(id); }
  function parseVec(s){
    var parts = String(s||'').split(',');
    var out = [], i;
    for(i=0;i<parts.length;i++){ var v = Number(parts[i].trim()); if(!isFinite(v)) throw new Error('Invalid number at position '+(i+1)); out.push(v); }
    if(!out.length) throw new Error('Empty vector');
    return out;
  }
  function dot(a,b){ var s=0, i; for(i=0;i<a.length;i++) s += a[i]*b[i]; return s; }
  function norm(a){ var s=0, i; for(i=0;i<a.length;i++) s += a[i]*a[i]; return Math.sqrt(s); }
  function row(ok,label,msg){ var div=document.createElement('div'); div.className='row'; var b=document.createElement('span'); b.className='badge '+(ok?'ok':'fail'); b.appendChild(document.createTextNode(ok?'PASS':'FAIL')); var l=document.createElement('span'); l.className='mono'; l.appendChild(document.createTextNode(label)); var t=document.createElement('span'); t.className='mono'; t.appendChild(document.createTextNode(' — '+msg)); div.appendChild(b); div.appendChild(l); div.appendChild(t); return div; }
  function clearChecks(){ var c=$('checks'); while(c.firstChild) c.removeChild(c.firstChild); }

  function renderChecks(x,y,ip,nx,ny,bound,eps){
    var checks = [];
    var tol = Math.max(eps, 1e-12);
    var absip = Math.abs(ip);
    // 1) Main inequality
    checks.push(row(absip <= bound + tol, 'Cauchy–Schwarz', '|⟨x,y⟩| ≤ ‖x‖‖y‖'));
    // 2) Squared form
    checks.push(row(absip*absip <= nx*nx*ny*ny + tol*Math.max(1,nx*nx*ny*ny), 'Squared form', '⟨x,y⟩² ≤ ‖x‖²‖y‖²'));
    // 3) Cosine bound (when norms nonzero)
    if (nx>0 && ny>0){ var c=ip/(nx*ny); checks.push(row(Math.abs(c) <= 1 + tol, 'Cosine bound', '|cosθ| ≤ 1')); }
    else { checks.push(row(true,'Trivial case','A zero vector makes the inequality trivial')); }
    // 4) Symmetry of inner product
    var ipYX = dot(y,x);
    checks.push(row(Math.abs(ip - ipYX) <= tol*Math.max(1,absip,Math.abs(ipYX)), 'Symmetry', '⟨x,y⟩ = ⟨y,x⟩'));
    // 5) Projection residual nonnegativity
    if (ny>0){ var r2 = nx*nx - (ip*ip)/(ny*ny); checks.push(row(r2 >= - tol*Math.max(1,nx*nx), 'Projection residual ≥ 0', '‖x‖² − ⟨x,y⟩²/‖y‖² ≥ 0')); }
    // Done
    var cnode=$('checks'); clearChecks(); var i; for(i=0;i<checks.length;i++) cnode.appendChild(checks[i]);
  }

  function evaluate(){
    try{
      var x = parseVec($('xInput').value);
      var y = parseVec($('yInput').value);
      if (x.length !== y.length) throw new Error('x and y must have the same length');
      var eps = Number($('epsInput').value||1e-12);
      var ip = dot(x,y), nx = norm(x), ny = norm(y), bound = nx*ny, slack = bound - Math.abs(ip);
      $('ip').textContent = ip.toPrecision(12);
      $('nx').textContent = nx.toPrecision(12);
      $('ny').textContent = ny.toPrecision(12);
      $('bound').textContent = bound.toPrecision(12);
      $('slack').textContent = (slack>=0?slack:0).toPrecision(12);
      var ok = (Math.abs(ip) <= bound + Math.max(eps,1e-12));
      $('verdict').textContent = (ok?'PASS':'FAIL') + ' — |⟨x,y⟩|≤‖x‖‖y‖';
      renderChecks(x,y,ip,nx,ny,bound,eps);
    } catch(e){
      $('ip').textContent='—'; $('nx').textContent='—'; $('ny').textContent='—'; $('bound').textContent='—'; $('slack').textContent='—';
      $('verdict').textContent = 'Error: ' + e.message; clearChecks();
    }
  }

  // Wire + autorun
  document.getElementById('solve').onclick = evaluate;
  document.getElementById('clear').onclick = function(){ $('xInput').value='1, 2, 3'; $('yInput').value='3, -1, 4'; $('epsInput').value='1e-12'; evaluate(); };
  evaluate();
})();
</script>
</body>
</html>

